<div class="bg-white dark:bg-gray-950 min-h-screen">
  <div class="container mx-auto pt-4 pb-32 px-6">
    <div class="py-3 border-b border-gray-200 dark:border-white/5 mb-6">
      <TertiaryLinkButton @route="course-admin.code-example-evaluators" @models={{array @model.course.slug}} @size="small" class="pl-1.5 mb-3">
        <div class="flex items-center">
          {{svg-jar "arrow-circle-left" class="w-4 h-4 mr-1.5 text-gray-500 dark:text-gray-400"}}

          <span>
            Back
          </span>
        </div>
      </TertiaryLinkButton>

      <div class="flex items-center justify-between">
        <div class="flex items-center gap-3">
          <EditableTextField @value={{@model.evaluator.slug}} @onUpdate={{perform this.updateSlugTask}}>
            <h3 class="text-xl font-bold text-gray-900 dark:text-gray-100 {{if this.updateSlugTask.isRunning 'animate-pulse'}}">
              {{@model.evaluator.slug}}
            </h3>
          </EditableTextField>

          {{#if @model.evaluator.isDraft}}
            <span
              class="inline-flex items-center rounded-md bg-yellow-50 dark:bg-yellow-400/10 px-2 py-1 text-xs font-medium text-yellow-800 dark:text-yellow-500 ring-1 ring-inset ring-yellow-600/20 dark:ring-yellow-400/20"
            >
              Draft
            </span>
          {{else}}
            <span
              class="inline-flex items-center rounded-md bg-green-50 dark:bg-green-500/10 px-2 py-1 text-xs font-medium text-green-700 dark:text-green-400 ring-1 ring-inset ring-green-600/20 dark:ring-green-500/20"
            >
              Live
            </span>
          {{/if}}
        </div>

        {{#if @model.evaluator.isDraft}}
          <div class="flex items-center gap-2">
            <DangerButtonWithTimedConfirmation @size="small" @onConfirm={{this.handleDeleteButtonClick}} data-test-delete-button>
              Delete
            </DangerButtonWithTimedConfirmation>

            <PrimaryButtonWithSpinner
              @size="small"
              @isDisabled={{this.deployTask.isRunning}}
              @shouldShowSpinner={{this.deployTask.isRunning}}
              data-test-deploy-button
              {{on "click" this.handleDeployButtonClick}}
            >
              Deploy
            </PrimaryButtonWithSpinner>
          </div>
        {{/if}}
      </div>
    </div>

    <div>
      <CourseAdmin::CodeExampleEvaluatorPage::PromptTemplateSection @evaluator={{@model.evaluator}} />
      <CourseAdmin::CodeExampleEvaluatorPage::ContextSection @evaluator={{@model.evaluator}} />

      <div class="py-3 border-b border-gray-200 dark:border-white/5 mb-6 mt-8 flex items-center justify-between">
        <div class="text-gray-900 dark:text-gray-100 font-semibold mb-1 text-2xl">Results</div>

        <div class="flex items-center gap-3">
          <CourseAdmin::CodeExampleEvaluatorPage::MoreDropdown
            @onEvaluateMoreSolutionsClick={{perform this.evaluateMoreSolutionsTask}}
            @onRegenerateAllEvaluationsClick={{perform this.regenerateAllEvaluationsTask}}
          />

          <CourseStageDropdown
            @course={{@model.course}}
            @selectedCourseStage={{this.currentCourseStage}}
            @onAllCourseStagesDropdownLinkClick={{this.handleAllCourseStagesDropdownLinkClick}}
            @onSelectedCourseStageChange={{this.handleCourseStageChange}}
          />

          <LanguageDropdown
            @languages={{this.sortedLanguagesForDropdown}}
            @requestedLanguage={{this.currentLanguage}}
            @selectedLanguage={{this.currentLanguage}}
            @shouldShowAllLanguagesOption={{true}}
            @onAllLanguagesDropdownLinkClick={{this.handleAllLanguagesDropdownLinkClick}}
            @onRequestedLanguageChange={{this.handleRequestedLanguageChange}}
            @onDidInsertDropdown={{(noop)}}
          />
        </div>
      </div>

      <CourseAdmin::CodeExampleEvaluatorPage::AccuracySection @evaluator={{@model.evaluator}} class="mt-8" />

      <CourseAdmin::CodeExampleEvaluatorPage::EvaluationsSection
        @evaluator={{@model.evaluator}}
        @passEvaluations={{@model.passEvaluations}}
        @failEvaluations={{@model.failEvaluations}}
        @unsureEvaluations={{@model.unsureEvaluations}}
        class="mt-8"
      />
    </div>
  </div>
</div>