<Settings::FormSection @title="Membership" @description="Your CodeCrafters membership details" data-test-membership-section>
  {{#if @user.hasActiveSubscription}}
    <Settings::BillingPage::MembershipSection::StatusPill @variant="teal">
      Membership active
    </Settings::BillingPage::MembershipSection::StatusPill>
    <div class="text-gray-500 dark:text-gray-400 text-xs mt-2">
      {{#if (and @user.isVip (gt @user.vipStatusExpiresAt @user.activeSubscription.cancelAt))}}
        <p class="line-through">
          You have access to all CodeCrafters content, valid until
          <b class="font-semibold">{{date-format @user.activeSubscription.cancelAt format="PPPp"}}</b>.
        </p>
        <p>
          ðŸŽ‰ You have VIP access to all CodeCrafters content, valid until
          <b class="font-semibold">{{date-format @user.vipStatusExpiresAt format="PPPp"}}</b>.
        </p>
      {{else}}
        <p>
          You have access to all CodeCrafters content, valid until
          <b class="font-semibold">{{date-format @user.activeSubscription.cancelAt format="PPPp"}}</b>.
        </p>
      {{/if}}
    </div>
  {{else if @user.isVip}}
    <Settings::BillingPage::MembershipSection::StatusPill @variant="teal">
      VIP Access
    </Settings::BillingPage::MembershipSection::StatusPill>
    <div class="text-gray-500 dark:text-gray-400 text-xs mt-2">
      <p>
        {{#if @user.vipStatusExpiresAt}}
          ðŸŽ‰ You have VIP access to all CodeCrafters content, valid until
          <b class="font-semibold">{{date-format @user.vipStatusExpiresAt format="PPPp"}}</b>.
        {{else}}
          ðŸŽ‰ You have VIP access to all CodeCrafters content.
        {{/if}}
      </p>
    </div>
  {{else if @user.expiredSubscription}}
    <Settings::BillingPage::MembershipSection::StatusPill @variant="red">
      Membership inactive
    </Settings::BillingPage::MembershipSection::StatusPill>
    <div class="text-gray-500 dark:text-gray-400 text-xs mt-2">
      <p>
        Your CodeCrafters membership is
        <b class="text-red-600 font-semibold">currently inactive</b>.
      </p>
      <p>
        Start a new membership to get access to
        <a href="https://docs.codecrafters.io/membership" target="_blank" rel="noopener noreferrer">membership benefits</a>.
      </p>
    </div>
    <PrimaryLinkButton @size="small" @route="pay" class="mt-3">
      Start membership â†’
    </PrimaryLinkButton>
  {{else}}
    <Settings::BillingPage::MembershipSection::StatusPill @variant="yellow">
      No membership found
    </Settings::BillingPage::MembershipSection::StatusPill>
    <div class="text-gray-500 dark:text-gray-400 text-xs mt-2">
      <p>
        You don't have a CodeCrafters membership. Start one to get access to
        <a href="https://docs.codecrafters.io/membership" target="_blank" rel="noopener noreferrer">membership benefits</a>.
      </p>
    </div>
    <PrimaryLinkButton @size="small" @route="pay" class="mt-3">
      Start membership â†’
    </PrimaryLinkButton>
  {{/if}}
</Settings::FormSection>