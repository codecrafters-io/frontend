<LinkTo
  class="group bg-white dark:bg-gray-925 p-5 rounded-md shadow-xs hover:shadow-sm transition-shadow cursor-pointer flex flex-col justify-between border border-gray-200 dark:border-white/5 relative"
  @route="concept"
  @model={{@concept.slug}}
  target="_blank"
  data-test-concept-card
>
  <div>
    <div class="flex items-center mb-2 gap-2">
      <div class="text-lg font-bold text-gray-900 dark:text-gray-100" data-test-concept-title>
        {{@concept.title}}
      </div>

      {{#if (current-user-is-concept-author @concept)}}
        <Pill @color="green">Yours</Pill>
      {{/if}}

      {{#if @concept.statusIsDraft}}
        <Pill @color="gray" data-test-draft-label>
          Draft
          <EmberTooltip @text="This concept is only visible to staff" />
        </Pill>
      {{/if}}
    </div>

    <div class="prose dark:prose-invert prose-sm mb-5">
      {{markdown-to-html @concept.descriptionMarkdown}}
    </div>
  </div>

  {{! Footer }}
  <div class="flex items-center justify-between">
    <div class="flex items-center">
      {{#let this.latestConceptEngagement as |latestConceptEngagement|}}
        {{#if latestConceptEngagement}}
          {{#let (or latestConceptEngagement.currentProgressPercentage 0) as |progressPercentage|}}
            {{#if (gt progressPercentage 0)}}
              <ConceptCard::ProgressBar @progressPercentage={{progressPercentage}} class="flex shrink-0" />
            {{else}}
              {{svg-jar "clock" class="w-4 mr-1 fill-current text-gray-300 dark:text-gray-700"}}

              <span class="text-xs text-gray-400 dark:text-gray-600" data-test-concept-card-reading-time>
                {{@concept.estimatedReadingTimeInMinutes}}
                mins
              </span>
            {{/if}}
          {{/let}}
        {{else}}
          {{svg-jar "clock" class="w-4 mr-1 fill-current text-gray-300 dark:text-gray-700"}}

          <span class="text-xs text-gray-400 dark:text-gray-600" data-test-concept-card-reading-time>
            {{@concept.estimatedReadingTimeInMinutes}}
            mins
          </span>
        {{/if}}
      {{/let}}
    </div>

    <div class="flex items-center">
      {{#let this.latestConceptEngagement as |latestConceptEngagement|}}
        <span
          class="font-bold text-teal-500 text-xs mr-1 -translate-x-1 opacity-0 group-hover:opacity-100 group-hover:translate-x-0 transition-[opacity_transform] duration-200 ease-out"
          data-test-action-text
        >
          {{#if latestConceptEngagement}}
            {{#if (eq latestConceptEngagement.currentProgressPercentage 100)}}
              View
            {{else}}
              Resume
            {{/if}}
          {{else}}
            View
          {{/if}}
        </span>
      {{/let}}

      {{svg-jar
        "arrow-right"
        class="w-4 fill-current text-gray-300 dark:text-gray-700 group-hover:text-teal-500 dark:group-hover:text-teal-500 transition-[colors_transform] duration-200 ease-out translate-x-0 group-hover:translate-x-0.5"
      }}
    </div>
  </div>
</LinkTo>