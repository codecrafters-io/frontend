<tr
  class="{{if
      this.isCurrentUser
      'bg-teal-50 dark:bg-teal-900/30 ring ring-teal-500 dark:ring-teal-700 relative'
      'hover:bg-gray-50 dark:hover:bg-gray-800'
    }}
    group/table-row"
  data-test-leaderboard-entry-row
>
  <LeaderboardPage::EntriesTable::RowCell class="text-right w-[8%]">
    <span class="text-xs font-medium {{if this.isCurrentUser 'text-teal-600 dark:text-teal-400' 'text-gray-400 dark:text-gray-500'}}">
      {{@rankText}}
    </span>
  </LeaderboardPage::EntriesTable::RowCell>

  <LeaderboardPage::EntriesTable::RowCell>
    <div class="flex items-center justify-between gap-x-6">
      <div class="flex items-center gap-1.5">
        <div class="flex-shrink-0 h-6 w-6">
          <AvatarImage @user={{@entry.user}} class="h-6 w-6 rounded-full border border-gray-300 dark:border-gray-600" />
        </div>
        <div
          class="text-xs font-mono max-w-[12ch] sm:max-w-[16ch] truncate
            {{if this.isCurrentUser 'text-teal-600 dark:text-teal-400' 'text-gray-600 dark:text-gray-400'}}"
        >
          <a
            href={{@entry.user.codecraftersProfileUrl}}
            target="_blank"
            class="hover:underline hover:text-gray-800 dark:hover:text-gray-200"
            rel="noopener noreferrer"
            data-test-username
          >
            {{@entry.user.username}}
          </a>
        </div>

        {{#if @entry.affiliateLink}}
          <a
            href={{@entry.affiliateLink.user.codecraftersProfileUrl}}
            target="_blank"
            rel="noopener noreferrer"
            class="inline-flex items-center gap-1 rounded-full text-xs px-2 pl-1.5 py-1 font-medium ring-1 ring-inset bg-blue-50 text-blue-700 ring-blue-600/20 dark:bg-blue-950 dark:text-blue-400 dark:ring-blue-400/20 hover:bg-blue-100 dark:hover:bg-blue-900 transition-colors"
            data-test-affiliate-link-pill
          >
            <img src={{@entry.affiliateLink.affiliateAvatarUrl}} class="h-4 w-4 rounded-full" alt="Referrer avatar" />
            <span>{{@entry.affiliateLink.affiliateName}}</span>
            <EmberTooltip @text="This user was referred by {{@entry.affiliateLink.affiliateName}}" />
          </a>
        {{/if}}
      </div>
      <div class="hidden md:flex items-center gap-1.5 flex-shrink-0 {{unless this.isCurrentUser 'opacity-25 group-hover/table-row:opacity-100'}}">
        {{#if (gt this.hiddenCourses.length 0)}}
          <div class="text-gray-500 dark:text-gray-400">
            ...

            <EmberTooltip @text={{concat this.hiddenCourses.length " other " (pluralize "challenge" count=this.hiddenCourses.length)}} />
          </div>
        {{/if}}

        {{#each this.visibleCourses as |course|}}
          <div class="flex">
            <CourseLogo @course={{course}} class="h-4 w-4 {{unless this.isCurrentUser 'grayscale opacity-50 hover:opacity-100 hover:grayscale-0'}}" />
            <EmberTooltip @text={{course.name}} />
          </div>
        {{/each}}
      </div>
    </div>
  </LeaderboardPage::EntriesTable::RowCell>

  <LeaderboardPage::EntriesTable::RowCell class="hidden md:table-cell">
    <div class="flex items-center justify-end">
      <div class="text-xs font-mono">
        <span
          class="{{if this.isCurrentUser 'text-teal-600 dark:text-teal-400' 'text-gray-700 dark:text-gray-200'}}"
        >{{@entry.scoreUpdatesCount}}</span>
        <span class="{{if this.isCurrentUser 'text-teal-600 dark:text-teal-400' 'text-gray-400 dark:text-gray-500'}}">stages</span>
      </div>
    </div>
  </LeaderboardPage::EntriesTable::RowCell>

  <LeaderboardPage::EntriesTable::RowCell>
    <div class="flex items-center justify-end">
      {{!-- {{#if (eq @entry.score 142)}}
        <span class="inline-block align-middle text-teal-500 triangle-up mr-1.5" aria-hidden="true">
          <EmberTooltip @text="Increased from 139 to 142 in the past month" />
        </span>
      {{/if}} --}}

      {{!-- {{#if (eq @entry.score 99)}}
        <span class="inline-block align-middle text-red-500 triangle-down mr-1.5" aria-hidden="true">
          <EmberTooltip @text="Decreased from 199 to 99 in the past month" />
        </span>
      {{/if}} --}}

      <div class="text-xs font-mono">
        <span class="{{if this.isCurrentUser 'text-teal-600 dark:text-teal-400' 'text-gray-700 dark:text-gray-200'}}">{{@entry.score}}</span>
        <span class="{{if this.isCurrentUser 'text-teal-600 dark:text-teal-400' 'text-gray-400 dark:text-gray-500'}}">pts</span>
      </div>
    </div>
  </LeaderboardPage::EntriesTable::RowCell>
</tr>