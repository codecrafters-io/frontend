<div class="bg-gray-100 border-r flex flex-col" data-test-course-page-sidebar ...attributes>
  {{yield}}

  <div class="flex items-center">
    {{! @glint-expect-error: not typesafe yet}}
    <CourseLogo @course={{@course}} class="w-8 h-8 mr-3" />

    <h1 class="text-gray-800 font-semibold mr-3 tracking-tight">
      {{@course.name}}
    </h1>
  </div>

  {{#if @course.releaseStatusIsBeta}}
    <BetaCourseLabel class="mr-3 mt-3 sm:mt-2" @tooltipSide="right" />
  {{/if}}

  {{! @glint-expect-error: not typesafe yet}}
  <CoursePage::RepositoryDropdown @repositories={{@repositories}} @activeRepository={{@activeRepository}} class="mt-4" />

  <div class="flex-grow overflow-y-auto mt-10 -mx-3">
    <CoursePage::StepList @stepList={{this.stepList}} />
    {{#if (gt @course.extensions.length 0)}}
      <div class="flex justify-center mt-3 px-3">
        <TertiaryButton
          @size="extra-small"
          {{! We're using the get helper instead of model.isNew because of a typescript error. }}
          {{! An issue is opened here: https://github.com/emberjs/data/issues/9146. }}
          @isDisabled={{get @activeRepository "isNew"}}
          {{on "click" this.handleConfigureExtensionsButtonClick}}
          data-test-configure-extensions-button
        >
          <div class="flex items-center">
            {{svg-jar "plus-circle" class="w-3 h-3 mr-1 text-gray-500"}}
            Extensions
          </div>

          {{! We're using the get helper instead of model.isNew because of a typescript error. }}
          {{! An issue is opened here: https://github.com/emberjs/data/issues/9146. }}
          {{#if (get @activeRepository "isNew")}}
            <EmberTooltip @text="Complete repository setup to configure extensions" />
          {{/if}}
        </TertiaryButton>
      </div>
    {{/if}}
  </div>

  <div class="flex flex-col mt-4">
    {{#unless this.currentUser.canAccessPaidContent}}
      {{! @glint-expect-error: not typesafe yet }}
      <CoursePage::Sidebar::MonthlyChallengeBanner @course={{@course}} class="mb-4" />

      <PrimaryLinkButton @size="small" @route="pay" class="mb-4">
        <span class="flex items-center gap-x-1 justify-center w-full">
          <span>Subscribe</span>
          {{svg-jar "lock-open" class="w-4"}}
        </span>
      </PrimaryLinkButton>
    {{/unless}}

    <LinkTo
      @route="catalog"
      class="inline-flex justify-center items-center text-gray-500 hover:text-gray-600 transition-colors text-xs p-2 border border-gray-300 rounded-lg hover:bg-white"
    >
      {{svg-jar "arrow-circle-left" class="w-4 mr-1 fill-current"}}
      <span class="font-bold uppercase tracking-wide">Back to Catalog</span>
    </LinkTo>
  </div>

  {{#if this.configureExtensionsModalIsOpen}}
    <ModalBackdrop>
      {{! @glint-expect-error: mut helper types don't agree?}}
      <CoursePage::ConfigureExtensionsModal @repository={{@activeRepository}} @onClose={{fn (mut this.configureExtensionsModalIsOpen) false}} />
    </ModalBackdrop>
  {{/if}}

  {{! placeholder for bottom bar }}
  <div class="h-10">
  </div>
</div>