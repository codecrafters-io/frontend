<ConceptAdmin::FormSection
  @title="Prompt Template"
  @description='Must start with a "&lt;criteria&gt; ... &lt;/criteria&gt;" section. Can be followed by additional instructions as a markdown list.'
  data-test-prompt-template-section
>
  <:content>
    <Textarea
      @value={{@evaluator.promptTemplate}}
      class="font-mono text-sm rounded-sm px-3 py-2 placeholder-gray-300 dark:placeholder-gray-600 focus:outline-hidden focus:ring-2 focus:ring-teal-500 border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-950 text-gray-900 dark:text-gray-100 shadow-xs w-full"
      placeholder="Learn about various network protocols and the TCP/IP model."
      rows="3"
      id="prompt_template"
      required
      disabled={{not @evaluator.isDraft}}
      {{autoresize @evaluator.promptTemplate}}
      {{markdown-input}}
      {{on "input" this.handlePromptTemplateInput}}
    />

    {{#if @evaluator.isDraft}}
      <PrimaryButtonWithSpinner
        data-test-update-prompt-template-button
        @isDisabled={{or (not this.hasUnsavedChanges) this.updatePromptTemplateTask.isRunning}}
        @shouldShowSpinner={{this.updatePromptTemplateTask.isRunning}}
        {{on "click" (perform this.updatePromptTemplateTask)}}
        class="mt-4"
      >
        Update
      </PrimaryButtonWithSpinner>
    {{else}}
      <PrimaryButton data-test-update-prompt-template-button @isDisabled={{true}} class="flex! mt-4">
        Update

        <EmberTooltip @text="Only available for draft evaluators" />
      </PrimaryButton>
    {{/if}}
  </:content>
</ConceptAdmin::FormSection>